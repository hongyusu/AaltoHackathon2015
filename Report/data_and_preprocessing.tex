
\section{Data preprocessing}

\subsection{Preliminaries}

\edmd\ dataset contains the information of a collection of $68,479$ sport tracks (e.g., walking, running, cycling).
We use $\Tcal=\{T_i\}_{i=1}^n$ to denote the collection of tracks where we have $n=68,479$.
Each track $T_i\in\Tcal$ is represented as a set of geographical points on the map (\gps\ locations) ordered by timestamps defined as
\begin{align*}
	T_i = \{(x_{i,1},y_{i,1},t_{i,1}),\cdots,(x_{i,m_i},y_{i,m_i},t_{i,m_i})\},
\end{align*}
where $x_{i,j}$ is the longitude, $y_{i,j}$ is the latitude, $t_{i,j}$ is the timestamp when $(x_{i,j},y_{i,j})$ is recorded by the tracking devices, $m_i$ is the total number of pointed recored for track $T_i$.
In addition, we have $t_{i,j}<t_{i,k}$ when $j<k$.

Each track $T_i$ is then represented as an undirected graph $G_i = (V_i,E_i)$ defined on a $2$D surface.
The vertex set $V_i=\{(x_{i,j},y_{i,j})\}_{j=1}^{m_i}$ includes all \gps\ locations of track $T_i$.
There exist an undirected edge $e_{i,k}$ between vertex $v_{i,k}$ and $v_{i,k+1}$ $\forall k\le m_i-1$.
As a result, the edge set is defined as a collection of undirected edges $E_i = \{e_{i,k}\}_{k=1}^{m_i-1}$.

\subsection{Global track graph}

The goal is to analyze all available track information and recommend an ideal track for individual end user.
We realize that it is feasible to maintain all individual track information $T_i$ and $V_i$ due to the following reasons
\begin{itemize}
	\item It is computationally expensive to analyze $68,479$ tracks each time when we perform the recommendation or searching algorithm. In particular, the data files for all tracks take approximately $2$ Gigabyte.
	\item It is difficult to measure global performances along the tracks (e.g., average/min/max speed on a location, number people running over a location) by analyzing track information separately. 
	\item Individual track information is not an accurate representation of the track due to the nature of the \gps\ devices and the tracking algorithms. In other word, several tracks might be performed on the same street but have different trajectories in terms of \gps\ location data. 
\end{itemize} 

We summerize and represent all track information via a global track graph $\gtt=(\vtt,\ett)$.
\begin{itemize}
	\item The world map is partitioned into small blocks of $10m\times10m$. Each block is represented by the \gps\ location $(x,y)$ of its centre, and is a potential vertex in the global track graph $\vttt=(x,y)\in\vtt$. 
	\item Then we map the set of vertices $v_{i,j}\in V_i$ in the graph $G_i$ of track $T_i$ to $\vtt$ by assigning $v_{i,j}$ to the nearest vertex $\vttt\in\vtt$. Essentially, each vertex $\vttt$ corresponds to a collection of vertices from different tracks
	\begin{align*}
		\vttt_k = \{v_{i,j}\}_{i\in\{1,\cdots,n\}, j\in\{1,\cdots,m_i\}}, k\in\{1,\cdots,|\vtt|\}
	\end{align*}
	\item There exists an undirected edge $\ettt=(\vttt_p,\vttt_q)\in\ett$ if there is an edge between $v_p\in\vttt_p$ and $v_q\in\vttt_q$. Mathematically, this can be defined as
	\begin{align*}
		\ett = \{(\vttt_p,\vttt_q)|\exists (v_p,v_q)\in E_i, \forall v_p\in\vttt_p,v_q\in\vttt_q,p,q\in\{1,\cdots,|\vtt|\}\}
	\end{align*}
\end{itemize}




\subsection{Annotation on global graph}



